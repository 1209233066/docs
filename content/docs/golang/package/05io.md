---
title: "io"
linkTitle: "io"
date: 2025-05-09
toc_hide: false
hide_summary: true
weight: 5
description: >
  io|标准库

tags: ["golang","库","io"]
categories: ["golang","库"]
url: golang/package/io.html
---

### i/o 操作文件内容

+ 读取文件

  ```go
  package main
  
  import (
  	"fmt"
  	"io"
  	"os"
  )
  
  func main() {
  	// 打开文件
  	file, err := os.Open("/etc/hosts")
  	if err != nil {
  		fmt.Println(err)
  		return
  	}
  	// 关闭文件
  	defer file.Close()
  
  	// 读取文件
  	var buffer [2048]byte
  	var result []byte
  	for {
  
  		seed, err := file.Read(buffer[:])
  		if err != nil && err == io.EOF {
  			fmt.Println(err)
  			break
  		}
  		result = append(result, buffer[:seed]...)
  	}
  	fmt.Println(string(result))
  
  }
  ```

  

+ 文件写入

  ```go
  package main
  
  import (
  	"fmt"
  	"io"
  	"os"
  )
  
  func main() {
  	// 打开文件
  	file, err := os.Open("/etc/hosts")
  	if err != nil {
  		fmt.Println(err)
  		return
  	}
  	// 关闭文件
  	defer file.Close()
  
  	// 读取文件
  	var buffer [2048]byte
  	var result []byte
  	for {
  
  		seed, err := file.Read(buffer[:])
  		if err != nil && err == io.EOF {
  			fmt.Println("文件读取完毕")
  			break
  		}
  		result = append(result, buffer[:seed]...)
  	}
  	// 文件写入操作
  	f, err := os.OpenFile("/tmp/hosts", os.O_CREATE|os.O_APPEND|os.O_WRONLY, 0644)
  	if err != nil {
  		fmt.Println(err)
  		return
  	}
  	defer f.Close()
  	f.Write(result)
  
  }
  ```

+ 文件拷贝 `io.cpoy()`

  ```go
  package main
  
  import (
  	"fmt"
  	"io"
  	"os"
  )
  
  func main() {
  	source, err := os.Open("/etc/hosts")
  	if err != nil {
  		fmt.Println(err)
  	}
  	dest, err := os.OpenFile("/tmp/hosts", os.O_CREATE|os.O_APPEND|os.O_WRONLY, 0644)
  	if err != nil {
  		fmt.Println(err)
  	}
  	defer source.Close()
  	defer dest.Close()
  	countwrite, err := io.Copy(dest, source)
  	fmt.Println(countwrite, err)
  
  }
  ```
